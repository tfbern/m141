(function(t){function e(e){for(var s,i,o=e[0],l=e[1],u=e[2],d=0,m=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&m.push(r[i][0]),r[i]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);c&&c(e);while(m.length)m.shift()();return n.push.apply(n,u||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],s=!0,o=1;o<a.length;o++){var l=a[o];0!==r[l]&&(s=!1)}s&&(n.splice(e--,1),t=i(i.s=a[0]))}return t}var s={},r={app:0},n=[];function i(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=s,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(a,s,function(e){return t[e]}.bind(null,s));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var c=l;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var s=a("19b3"),r=a.n(s);r.a},"19b3":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-app-bar",{attrs:{app:"",color:"primary",dark:""}},[a("v-row",[a("v-col",{attrs:{align:"start",justify:"start"}},[a("div",{staticClass:"d-flex align-center"},[a("v-img",{staticClass:"shrink mr-2",attrs:{alt:"Vuetify Logo",contain:"",src:"https://cdn.vuetifyjs.com/images/logos/vuetify-logo-dark.png",transition:"scale-transition",width:"40"}}),a("h2",[t._v("Aufgabenmanager")])],1)]),a("v-col",{attrs:{align:"center",justify:"center"}},[a("div",{staticStyle:{"margin-top":"12px"},attrs:{id:"nav"}},[a("router-link",{staticClass:"router-link",attrs:{to:"/"}},[t._v("Home")]),t.isAuth?a("span",[t._v(" | ")]):t._e(),t.isAuth?a("router-link",{staticClass:"router-link",attrs:{to:"/tasks"}},[t._v("Tasks")]):t._e(),t.isAuth&&"admin"===t.username?a("span",[t._v(" | ")]):t._e(),t.isAuth&&"admin"===t.username?a("router-link",{staticClass:"router-link",attrs:{to:"/users"}},[t._v("Users")]):t._e()],1)]),a("v-col",{attrs:{align:"right",justify:"right"}},[a("div",{staticStyle:{"margin-top":"12px"},attrs:{id:"nav"}},[t.isAuth?t._e():a("router-link",{staticClass:"router-link",attrs:{to:"/register"}},[t._v("Register")]),t.isAuth?t._e():a("span",[t._v(" | ")]),t.isAuth?t._e():a("router-link",{staticClass:"router-link",attrs:{to:"/login"}},[t._v("Login")]),t.isAuth?a("router-link",{staticClass:"router-link",attrs:{to:"/profile"}},[t._v(t._s(t.fullname))]):t._e(),t.isAuth?a("span",[t._v(" | ")]):t._e(),t.isAuth?a("router-link",{staticClass:"router-link",attrs:{to:"/login"}},[a("span",{on:{click:t.logout}},[t._v("Logout")])]):t._e()],1)])],1)],1),a("v-content",[a("v-container",[a("v-row",{staticStyle:{"margin-top":"20px"},attrs:{align:"center",justify:"center"}},[a("router-view",{attrs:{isAuth:t.isAuth,username:t.username}})],1)],1)],1)],1)},n=[],i={name:"App",components:{},data:function(){return{isAuth:"",username:"",fullname:""}},mounted:function(){this.init()},updated:function(){this.init()},methods:{init:function(){this.isAuth=this.$store.getters.isLoggedIn,this.isAuth&&(this.username=this.$store.getters.getUser.username,this.fullname=this.$store.getters.getUser.fullname)},logout:function(){this.isAuth=!1,this.$store.dispatch("logout")}}},o=i,l=(a("034f"),a("2877")),u=a("6544"),c=a.n(u),d=a("7496"),m=a("40dc"),p=a("62ad"),f=a("a523"),h=a("a75b"),v=a("adda"),g=a("0fd9"),x=Object(l["a"])(o,r,n,!1,null,null,null),w=x.exports;c()(x,{VApp:d["a"],VAppBar:m["a"],VCol:p["a"],VContainer:f["a"],VContent:h["a"],VImg:v["a"],VRow:g["a"]});var b=a("f309");s["a"].use(b["a"]);var _=new b["a"]({}),k=(a("45fc"),a("8c4f")),y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-flex",[a("h2",[t._v("Willkommen bei Aufgabenmanager")]),t.isAuth?a("p",[t._v("Du hast dich erfolgreich als "),a("a",{attrs:{href:"profile"}},[t._v(t._s(t.username))]),t._v(" eingeloggt. ")]):a("p",[t._v("Um deine Aufgaben zu sehen, musst du dich "),a("a",{attrs:{href:"/login"}},[t._v("einloggen")]),t._v(". Falls du noch kein Benutzerkonto hast, musst du dich "),a("a",{attrs:{href:"/register"}},[t._v("registrieren")]),t._v(". ")])])},I=[],V={props:["isAuth","username"]},C=V,A=a("0e8f"),T=Object(l["a"])(C,y,I,!1,null,null,null),O=T.exports;c()(T,{VFlex:A["a"]});var S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-col",{attrs:{cols:"12",sm:"8",md:"4"}},[a("v-card",{staticClass:"elevation-12"},[a("v-toolbar",{attrs:{color:"primary",dark:"",flat:""}},[a("v-toolbar-title",[t._v("Register")])],1),a("v-card-text",[a("v-form",[a("v-text-field",{attrs:{label:"Username",name:"login","prepend-icon":"mdi-account",type:"text"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),a("v-text-field",{attrs:{label:"Vorname",name:"firstname","prepend-icon":"mdi-account",type:"text"},model:{value:t.firstname,callback:function(e){t.firstname=e},expression:"firstname"}}),a("v-text-field",{attrs:{label:"Nachname",name:"lastname","prepend-icon":"mdi-account",type:"text"},model:{value:t.lastname,callback:function(e){t.lastname=e},expression:"lastname"}}),a("v-text-field",{attrs:{id:"password",label:"Password",name:"password","prepend-icon":"mdi-lock",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),a("v-text-field",{attrs:{id:"password_repeat",label:"Password (repeat)",name:"password-repeat","prepend-icon":"mdi-lock",type:"password"},model:{value:t.password_repeat,callback:function(e){t.password_repeat=e},expression:"password_repeat"}}),t.msg?a("p",{staticStyle:{color:"red","text-align":"center"}},[t._v(t._s(t.msg))]):t._e()],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary"},on:{click:t.signUp}},[t._v("Register")])],1)],1)],1)},P=[],j=(a("96cf"),a("89ba")),R=a("bc3a"),$=a.n(R),U={data:function(){return{username:"",firstname:"",lastname:"",password:"",password_repeat:"",msg:""}},methods:{signUp:function(){var t=Object(j["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e={username:this.username,firstname:this.firstname,lastname:this.lastname,password:this.password,password_repeat:this.password_repeat},t.next=4,$.a.post("/api/user",e).then((function(t){return t.data}));case 4:a=t.sent,this.msg=a.msg,this.$router.push("/login"),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),this.msg=t.t0.response.data.msg;case 12:case"end":return t.stop()}}),t,this,[[0,9]])})));function e(){return t.apply(this,arguments)}return e}()}},E=U,D=a("8336"),z=a("b0af"),B=a("99d9"),L=a("4bd4"),F=a("2fa4"),N=a("8654"),q=a("71d9"),M=a("2a7f"),W=Object(l["a"])(E,S,P,!1,null,null,null),Y=W.exports;c()(W,{VBtn:D["a"],VCard:z["a"],VCardActions:B["a"],VCardText:B["b"],VCol:p["a"],VForm:L["a"],VSpacer:F["a"],VTextField:N["a"],VToolbar:q["a"],VToolbarTitle:M["a"]});var H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-col",{attrs:{cols:"12",sm:"8",md:"4"}},[t.isAuth?a("p",[t._v("You are already logged in! See your "),a("a",{attrs:{href:"profile"}},[t._v("profile")]),t._v(".")]):t._e(),t.isAuth?t._e():a("v-card",{staticClass:"elevation-12"},[a("v-toolbar",{attrs:{color:"primary",dark:"",flat:""}},[a("v-toolbar-title",[t._v("Login")])],1),a("v-card-text",[a("v-form",[a("v-text-field",{attrs:{label:"Username",name:"login","prepend-icon":"mdi-account",type:"text"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),a("v-text-field",{attrs:{id:"password",label:"Password",name:"password","prepend-icon":"mdi-lock",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t.msg?a("p",{staticStyle:{color:"red","text-align":"center"}},[t._v(t._s(t.msg))]):t._e()],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary"},on:{click:t.login}},[t._v("Login")])],1)],1)],1)},J=[],K={name:"Login",props:["isAuth"],data:function(){return{username:"",password:"",msg:""}},methods:{login:function(){var t=Object(j["a"])(regeneratorRuntime.mark((function t(){var e,a,s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e={username:this.username,password:this.password},t.next=4,$.a.post("/api/user/login",e).then((function(t){return t.data}));case 4:a=t.sent,this.msg=a.msg,s=a.token,r=a.user,this.$store.dispatch("login",{token:s,user:r}),this.$router.push("/"),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](0),this.msg="Username or password is incorrect";case 15:case"end":return t.stop()}}),t,this,[[0,12]])})));function e(){return t.apply(this,arguments)}return e}()}},G=K,Q=Object(l["a"])(G,H,J,!1,null,null,null),X=Q.exports;c()(Q,{VBtn:D["a"],VCard:z["a"],VCardActions:B["a"],VCardText:B["b"],VCol:p["a"],VForm:L["a"],VSpacer:F["a"],VTextField:N["a"],VToolbar:q["a"],VToolbarTitle:M["a"]});var Z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-flex",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.records,"items-per-page":10},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Aufgabenliste")]),a("div",{staticClass:"flex-grow-1"}),a("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-btn",t._g({staticClass:"mb-2",attrs:{color:"primary",dark:""}},s),[t._v("Neue Aufgabe")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"Bezeichung"},model:{value:t.editedItem.text,callback:function(e){t.$set(t.editedItem,"text",e)},expression:"editedItem.text"}}),a("v-text-field",{attrs:{label:"Start"},model:{value:t.editedItem.startdate,callback:function(e){t.$set(t.editedItem,"startdate",e)},expression:"editedItem.startdate"}}),a("v-text-field",{attrs:{label:"Fälligkeit"},model:{value:t.editedItem.duedate,callback:function(e){t.$set(t.editedItem,"duedate",e)},expression:"editedItem.duedate"}}),a("v-select",{attrs:{items:t.priorities,label:"Priorität"},model:{value:t.editedItem.priority,callback:function(e){t.$set(t.editedItem,"priority",e)},expression:"editedItem.priority"}}),a("v-select",{attrs:{items:t.owners,"item-text":"fullname",label:"Besitzer"},model:{value:t.editedItem.userfull,callback:function(e){t.$set(t.editedItem,"userfull",e)},expression:"editedItem.userfull"}}),a("v-select",{attrs:{items:t.states,label:"Status"},model:{value:t.editedItem.status,callback:function(e){t.$set(t.editedItem,"status",e)},expression:"editedItem.status"}})],1)],1)],1)],1),a("v-card-actions",[a("div",{staticClass:"flex-grow-1"}),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v("Cancel")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.save}},[t._v("Save")])],1)],1)],1)],1)]},proxy:!0},{key:"item",fn:function(e){return[a("tr",[a("td",{staticClass:"text-start"},["erledigt"!==e.item.status?a("v-icon",{attrs:{small:""},on:{click:function(a){return t.toggleItem(e.item)}}},[t._v("mdi-checkbox-blank-outline")]):a("v-icon",{attrs:{small:""},on:{click:function(a){return t.toggleItem(e.item)}}},[t._v("mdi-checkbox-marked-outline")])],1),a("td",{staticClass:"text-start",style:t.style(e.item)},[t._v(t._s(e.item.text))]),a("td",{staticClass:"text-start",style:t.style(e.item)},[t._v(t._s(t.formatDate(e.item.startdate)))]),a("td",{staticClass:"text-start",style:t.style(e.item)},[t._v(t._s(t.formatDate(e.item.duedate)))]),a("td",{staticClass:"text-start",style:t.style(e.item)},[t._v(t._s(e.item.priority))]),a("td",{staticClass:"text-start",style:t.style(e.item)},[t._v(t._s(e.item.userfull))]),a("td",{staticClass:"text-start",style:t.style(e.item)},[t._v(t._s(e.item.status))]),a("td",{staticClass:"text-start"},[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.editItem(e.item)}}},[t._v("mdi-pencil")]),a("v-icon",{attrs:{small:""},on:{click:function(a){return t.deleteItem(e.item)}}},[t._v("mdi-delete")])],1)])]}},{key:"no-data",fn:function(){return[a("p",[t._v("You don't have any tasks or there is no connection to database!")])]},proxy:!0}])})],1)},tt=[],et=(a("7db0"),a("c975"),a("a434"),a("0d03"),{props:["isAuth","username"],name:"Tasks",data:function(){return{headers:[{text:"Erledigt",value:"status"},{text:"Task",value:"text"},{text:"Start",value:"startdate"},{text:"Fälligkeit",value:"duedate"},{text:"Priorität",value:"priority"},{text:"Besitzer",value:"userfull"},{text:"Status",value:"status"},{text:"Actions",value:"action",sortable:!1}],records:[],dialog:!1,editedIndex:-1,editedId:-1,editedItem:{},defaultItem:{startdate:"2020-1-1",duedate:"2020-12-31",priority:"normal",status:"nicht begonnen"},priorities:[],states:[],owners:[],currentUser:""}},computed:{formTitle:function(){return-1===this.editedIndex?"Neue Aufgabe":"Aufgabe editieren"}},watch:{dialog:function(t){t||this.close()}},created:function(){this.init()},methods:{init:function(){var t=Object(j["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.editedItem=Object.assign({},this.defaultItem),t.next=3,$.a.get("/api/task/priorities").then((function(t){return t.data}));case 3:return this.priorities=t.sent,t.next=6,$.a.get("/api/task/states").then((function(t){return t.data}));case 6:return this.states=t.sent,t.next=9,$.a.get("/api/user").then((function(t){return t.data}));case 9:if(this.owners=t.sent,this.currentUser=this.owners.find((function(t){return t.username===e.username})),void 0===this.currentUser){t.next=21;break}if("admin"!==this.username){t.next=18;break}return t.next=15,$.a.get("/api/tasks").then((function(t){return t.data}));case 15:this.records=t.sent,t.next=21;break;case 18:return t.next=20,$.a.get("/api/tasks/".concat(this.currentUser.id)).then((function(t){return t.data}));case 20:this.records=t.sent;case 21:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),toggleItem:function(t){var e=this.records.indexOf(t),a=this.records[e].status;a="erledigt"===a?"in Bearbeitung":"erledigt",t.id?($.a.put("/api/tasks/".concat(t.id),{status:a}),this.records[e].status=a):alert("ID missing, cannot toggle")},editItem:function(t){t.startdate=this.formatDate(t.startdate),t.duedate=this.formatDate(t.duedate),this.editedIndex=this.records.indexOf(t),this.editedId=t.id,this.editedItem=Object.assign({},t),this.dialog=!0},deleteItem:function(t){var e=this.records.indexOf(t);confirm("Are you sure you want to delete this item?")&&(this.records.splice(e,1),$.a.delete("/api/task/".concat(t.id)))},save:function(){var t=Object(j["a"])(regeneratorRuntime.mark((function t(){var e,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.editedItem.kuser=this.owners.find((function(t){return t.fullname===a.editedItem.userfull})).id,!(this.editedIndex>-1)){t.next=10;break}return delete this.editedItem.userfirst,delete this.editedItem.userlast,t.next=6,$.a.put("/api/tasks/".concat(this.editedId),this.editedItem).then((function(t){return t.data}));case 6:e=t.sent,e.code?alert(e.sqlMessage):this.currentUser.fullname===this.editedItem.userfull?Object.assign(this.records[this.editedIndex],this.editedItem):(this.records.splice(this.editedIndex,1),alert("Aufgabe wurde "+this.editedItem.userfull+"zugewiesen.")),t.next=14;break;case 10:return t.next=12,$.a.post("/api/tasks",this.editedItem).then((function(t){return t.data[0]}));case 12:this.editedItem.id=t.sent,this.currentUser.fullname===this.editedItem.userfull?this.records.push(this.editedItem):alert("Aufgabe wurde "+this.editedItem.userfull+"zugewiesen.");case 14:this.close();case 15:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),close:function(){var t=this;this.dialog=!1,setTimeout((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1}),300)},style:function(t){return"erledigt"===t.status?"text-decoration:line-through":""},formatDate:function(t){if(t){var e=new Date(t);return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()}return null}}}),at=et,st=a("8fea"),rt=a("169a"),nt=a("132d"),it=a("b974"),ot=Object(l["a"])(at,Z,tt,!1,null,null,null),lt=ot.exports;c()(ot,{VBtn:D["a"],VCard:z["a"],VCardActions:B["a"],VCardText:B["b"],VCardTitle:B["c"],VCol:p["a"],VContainer:f["a"],VDataTable:st["a"],VDialog:rt["a"],VFlex:A["a"],VIcon:nt["a"],VRow:g["a"],VSelect:it["a"],VTextField:N["a"],VToolbar:q["a"],VToolbarTitle:M["a"]});var ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-flex",[a("h2",[t._v("Benutzerprofil")]),a("v-simple-table",{scopedSlots:t._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("Bezeichnung")]),a("th",{staticClass:"text-left"},[t._v("Wert")]),a("th",{staticClass:"text-left"},[t._v("Aktion")])])]),a("tbody",[a("tr",[a("td",[t._v("Benutzername:")]),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.username))])]),a("tr",[a("td",[t._v("Name:")]),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.name))])]),a("tr",[a("td",[t._v("Benutzer ID:")]),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.id))])]),a("tr",[a("td",[t._v("Passwort Hash:")]),a("td",[t._v(t._s(t.password))]),a("td",[a("a",{attrs:{href:"/passwd"}},[t._v("Passwort ändern")])])]),a("tr",[a("td",[t._v("Registriert:")]),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.formatDate(t.registered)))])]),a("tr",[a("td",[t._v("Letztes Login:")]),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.formatDate(t.lastlogin)))])]),a("tr",[a("td",[t._v("Token:")]),a("td",{attrs:{colspan:"2"}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.token,expression:"token"}],staticStyle:{resize:"none"},attrs:{readonly:"",disabled:"",rows:"2",cols:"100"},domProps:{value:t.token},on:{input:function(e){e.target.composing||(t.token=e.target.value)}}})])])])]},proxy:!0}])})],1)},ct=[],dt=(a("b0c0"),{props:["isAuth","username"],data:function(){return{id:"",name:"",password:"",registered:"",lastlogin:"",token:""}},created:function(){this.token=this.$store.getters.isLoggedIn,this.token&&(this.id=this.$store.getters.getUser.id,this.name=this.$store.getters.getUser.fullname,this.password=this.$store.getters.getUser.password,this.registered=this.$store.getters.getUser.registered,this.lastlogin=this.$store.getters.getUser.lastlogin)},methods:{formatDate:function(t){if(t){var e=new Date(t);return e.toLocaleString()}return null}}}),mt=dt,pt=a("1f4f"),ft=Object(l["a"])(mt,ut,ct,!1,null,null,null),ht=ft.exports;c()(ft,{VFlex:A["a"],VSimpleTable:pt["a"]});var vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-flex",[a("h2",[t._v("Benutzerverwaltung")]),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.records,"items-per-page":10},scopedSlots:t._u([{key:"item",fn:function(e){return[a("tr",[a("td",{staticClass:"text-start"},[t._v(t._s(e.item.username))]),a("td",{staticClass:"text-start"},[t._v(t._s(e.item.fullname))]),a("td",{staticClass:"text-start"},[t._v(t._s(t.formatDate(e.item.registered)))]),a("td",{staticClass:"text-start"},[t._v(t._s(t.formatDate(e.item.lastlogin)))]),a("td",{staticClass:"text-start"},[a("v-icon",{attrs:{small:""},on:{click:function(a){return t.deleteItem(e.item)}}},[t._v("mdi-delete")])],1)])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:t.init}},[t._v("Reload")])]},proxy:!0}])})],1)},gt=[],xt={props:["username"],name:"Users",data:function(){return{headers:[{text:"Benutzername",value:"username"},{text:"Name",value:"fullname"},{text:"Registriert",value:"registered"},{text:"Letztes Login",value:"lastlogin"},{text:"Actions",value:"action",sortable:!1}],records:[]}},created:function(){this.init()},methods:{init:function(){var t=Object(j["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,$.a.get("/api/user");case 2:this.records=t.sent,this.records=this.records.data;case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),deleteItem:function(){var t=Object(j["a"])(regeneratorRuntime.mark((function t(e){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.username!=this.username){t.next=2;break}return t.abrupt("return",alert("This is your active account. Won't delete it!"));case 2:if(a=this.records.indexOf(e),!confirm("Are you sure you want to delete this item?")){t.next=8;break}return t.next=6,$.a.delete("/api/user/".concat(e.id)).then((function(t){return t.data}));case 6:s=t.sent,1==s?this.records.splice(a,1):alert(s.sqlMessage);case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),formatDate:function(t){if(t){var e=new Date(t);return e.toLocaleString()}return null}}},wt=xt,bt=Object(l["a"])(wt,vt,gt,!1,null,null,null),_t=bt.exports;c()(bt,{VBtn:D["a"],VDataTable:st["a"],VFlex:A["a"],VIcon:nt["a"]});var kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-col",{attrs:{cols:"12",sm:"8",md:"4"}},[t.isAuth?a("div",[a("v-card",{staticClass:"elevation-12"},[a("v-toolbar",{attrs:{color:"primary",dark:"",flat:""}},[a("v-toolbar-title",[t._v("Passwort ändern")])],1),a("v-card-text",[a("v-form",[a("v-text-field",{attrs:{label:"Aktuelles Passwort",name:"password","prepend-icon":"mdi-lock",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),a("v-text-field",{attrs:{id:"newPassword",label:"Neues Password",name:"newPassword","prepend-icon":"mdi-lock",type:"password"},model:{value:t.newPassword,callback:function(e){t.newPassword=e},expression:"newPassword"}}),a("v-text-field",{attrs:{id:"newPasswordRepeat",label:"Neues Passwort",name:"newPasswordRepeat","prepend-icon":"mdi-lock",type:"password"},model:{value:t.newPasswordRepeat,callback:function(e){t.newPasswordRepeat=e},expression:"newPasswordRepeat"}}),t.msg?a("p",{staticStyle:{color:"red","text-align":"center"}},[t._v(t._s(t.msg))]):t._e()],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary"},on:{click:t.passwd}},[t._v("ändern")])],1)],1)],1):t._e()])},yt=[],It={name:"Password",props:["isAuth"],data:function(){return{id:"",username:"",password:"",newPassword:"",newPasswordRepeat:"",msg:""}},mounted:function(){this.$store.getters.isLoggedIn&&(this.id=this.$store.getters.getUser.id,this.username=this.$store.getters.getUser.username)},methods:{passwd:function(){var t=Object(j["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e={username:this.username,password:this.password,newPassword:this.newPassword,newPasswordRepeat:this.newPasswordRepeat},t.next=4,$.a.put("/api/user/".concat(this.id),e).then((function(t){return t.data}));case 4:a=t.sent,console.log(a),this.msg=a.msg,this.$store.dispatch("logout"),this.$router.push("/login"),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),this.msg="Cannot change password!";case 14:case"end":return t.stop()}}),t,this,[[0,11]])})));function e(){return t.apply(this,arguments)}return e}()}},Vt=It,Ct=Object(l["a"])(Vt,kt,yt,!1,null,null,null),At=Ct.exports;c()(Ct,{VBtn:D["a"],VCard:z["a"],VCardActions:B["a"],VCardText:B["b"],VCol:p["a"],VForm:L["a"],VSpacer:F["a"],VTextField:N["a"],VToolbar:q["a"],VToolbarTitle:M["a"]});var Tt=a("2f62"),Ot=a("0e44");s["a"].use(Tt["a"]);var St=function(){return{token:"",user:{}}},Pt=new Tt["a"].Store({strict:!0,plugins:[Object(Ot["a"])()],state:St(),getters:{isLoggedIn:function(t){return t.token},getUser:function(t){return t.user}},mutations:{SET_TOKEN:function(t,e){t.token=e},SET_USER:function(t,e){t.user=e},RESET:function(t){Object.assign(t,St())}},actions:{login:function(t,e){var a=t.commit,s=e.token,r=e.user;a("SET_TOKEN",s),a("SET_USER",r),$.a.defaults.headers.common["Authorization"]="Bearer ".concat(s)},logout:function(t){var e=t.commit;e("RESET",""),$.a.defaults.headers.common["Authorization"]=""}}});s["a"].use(k["a"]);var jt=new k["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:O},{path:"/register",name:"register",component:Y},{path:"/login",name:"login",component:X},{path:"/tasks",name:"tasks",component:lt,meta:{requiresAuth:!0}},{path:"/users",name:"users",component:_t,meta:{requiresAuth:!0}},{path:"/profile",name:"profile",component:ht,meta:{requiresAuth:!0}},{path:"/passwd",name:"passwd",component:At,meta:{requiresAuth:!0}}]});jt.beforeEach((function(t,e,a){t.matched.some((function(t){return t.meta.requiresAuth}))?Pt.getters.isLoggedIn?a():a({path:"/login",query:{redirect:t.fullPath}}):a()}));var Rt=jt;s["a"].config.productionTip=!1,$.a.defaults.headers.common["Authorization"]="Bearer ".concat(Pt.state.token),new s["a"]({vuetify:_,router:Rt,store:Pt,render:function(t){return t(w)}}).$mount("#app")}});
//# sourceMappingURL=app.7e3cc945.js.map